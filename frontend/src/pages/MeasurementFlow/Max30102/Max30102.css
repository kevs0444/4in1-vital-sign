/* 
  Specific overrides for Max30102 page to optimize layout at 100% zoom.
  These styles are scoped to .max30102-page to avoid affecting other measurement pages.
*/

/* Container Layout Optimization */
.max30102-page .measurement-content {
  padding: 15px !important;
  max-width: 950px !important;
  gap: 10px;
}

.max30102-page .measurement-display-section {
  gap: 12px !important;
  margin: 8px auto !important;
  width: 100% !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: center !important;
}

/* Finger Sensor - Optimized size */
.max30102-page .finger-sensor {
  width: 140px !important;
  height: 140px !important;
  padding: 15px !important;
}

.max30102-page .sensor-light {
  width: 50px !important;
  height: 50px !important;
  margin-bottom: 15px !important;
}

.max30102-page .finger-placeholder {
  font-size: 3rem !important;
  margin-bottom: 10px !important;
}

.max30102-page .sensor-status-text {
  font-size: 0.85rem !important;
  margin-top: 8px !important;
}

/* Vital Sign Cards - Force centered single row */
.max30102-page .row.g-4.mb-4 {
  display: flex !important;
  flex-direction: row !important;
  justify-content: center !important;
  align-items: stretch !important;
  flex-wrap: nowrap !important;
  gap: 15px !important;
  width: 100% !important;
  margin: 0 auto 15px auto !important;
  padding: 0 10px !important;
}

/* Override Bootstrap column widths */
.max30102-page .row.g-4.mb-4>.col-12,
.max30102-page .row.g-4.mb-4>.col-md-4 {
  flex: 0 0 auto !important;
  width: auto !important;
  max-width: none !important;
  padding: 0 !important;
}

.max30102-page .measurement-card {
  padding: 15px !important;
  min-height: 200px !important;
  min-width: 150px !important;
  max-width: 200px !important;
  border-radius: 16px !important;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  text-align: center;
  /* Ensure all text is centered */
  flex: 1;
  /* Allow cards to grow and fill space equally */
  max-width: 240px;
  /* Prevent cards from getting too wide */
  border: 3px solid #dee2e6;
  transition: all 0.3s ease;
}

/* Dynamic Border Colors Based on Status */
.max30102-page .measurement-card.status-pending {
  border-color: #dee2e6;
  background: #fff;
}

.max30102-page .measurement-card.status-complete {
  border-color: #28a745;
  background: linear-gradient(135deg, #f0fff4, #ffffff);
  box-shadow: 0 4px 15px rgba(40, 167, 69, 0.2);
}

.max30102-page .measurement-card.status-warning {
  border-color: #ffc107;
  background: linear-gradient(135deg, #fffbf0, #ffffff);
  box-shadow: 0 4px 15px rgba(255, 193, 7, 0.2);
}

.max30102-page .measurement-card.status-error {
  border-color: #dc3545;
  background: linear-gradient(135deg, #fff5f5, #ffffff);
  box-shadow: 0 4px 15px rgba(220, 53, 69, 0.2);
}

.max30102-page .measurement-icon {
  width: 55px !important;
  height: 55px !important;
  margin-bottom: 10px !important;
  display: flex;
  align-items: center;
  justify-content: center;
}

.max30102-page .measurement-icon img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.max30102-page .instruction-title {
  font-size: 1.05rem !important;
  margin-bottom: 6px !important;
  text-align: center;
  width: 100%;
}

/* FIX: Specific styling for card subtitles */
.max30102-page .measurement-card .instruction-text {
  font-size: 0.95rem !important;
  margin-bottom: 12px !important;
  text-align: center !important;
  width: 100% !important;
  display: block !important;
  margin-left: auto !important;
  margin-right: auto !important;
  padding: 0 !important;
}

.max30102-page .measurement-value-container {
  margin: 15px 0 !important;
  /* More space around values */
  gap: 8px !important;
  display: flex;
  align-items: baseline;
  justify-content: center;
  width: 100%;
}

.max30102-page .measurement-value {
  font-size: 3rem !important;
  font-weight: 800;
  line-height: 1;
  text-align: center;
}

.max30102-page .measurement-unit {
  font-size: 1.4rem !important;
  /* Larger unit */
  font-weight: 600;
  color: var(--text-secondary);
  text-align: center;
}

.max30102-page .measurement-status-badge {
  padding: 8px 16px !important;
  min-width: 100px !important;
  font-size: 0.9rem !important;
  margin-top: 10px !important;
  border-radius: 20px !important;
  text-align: center;
}

/* Instruction Cards - Force centered single row */
.max30102-page .row.g-3 {
  display: flex !important;
  flex-direction: row !important;
  justify-content: center !important;
  align-items: stretch !important;
  flex-wrap: nowrap !important;
  gap: 15px !important;
  width: 100% !important;
  margin: 0 auto !important;
  padding: 0 10px !important;
}

/* Override Bootstrap column widths for instruction cards */
.max30102-page .row.g-3>.col-12,
.max30102-page .row.g-3>.col-md-4 {
  flex: 0 0 auto !important;
  width: auto !important;
  max-width: none !important;
  padding: 0 !important;
}

.max30102-page .instruction-cards {
  gap: 15px !important;
  display: flex !important;
  justify-content: center !important;
  align-items: stretch !important;
  flex-wrap: nowrap !important;
  width: 100% !important;
  margin: 0 auto !important;
}

.max30102-page .instruction-card {
  padding: 14px !important;
  min-width: 140px !important;
  max-width: 180px !important;
  border-radius: 14px !important;
  min-height: 140px !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  text-align: center !important;
  justify-content: center !important;
  margin: 0 !important;
  flex: 1 1 0 !important;
}

.max30102-page .instruction-step-number {
  width: 35px !important;
  height: 35px !important;
  font-size: 1rem !important;
  margin-bottom: 12px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

.max30102-page .instruction-icon {
  font-size: 1.8rem !important;
  margin-bottom: 12px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  text-align: center !important;
  width: 100% !important;
  min-height: 80px !important;
}

.max30102-page .instruction-icon .step-icon-image {
  width: 80px !important;
  height: 80px !important;
  object-fit: contain !important;
  display: block !important;
  margin: 0 auto !important;
}

.max30102-page .instruction-title {
  font-size: 1.1rem !important;
  margin-bottom: 8px !important;
  text-align: center !important;
  width: 100% !important;
}

.max30102-page .instruction-text {
  font-size: 0.9rem !important;
  text-align: center !important;
  width: 100% !important;
  margin: 0 !important;
}

/* Header & Button Optimization */
.max30102-page .measurement-header {
  margin-bottom: 12px !important;
}

.max30102-page .measurement-title {
  font-size: 1.8rem !important;
  margin-bottom: 8px !important;
}

.max30102-page .measurement-subtitle {
  font-size: 0.95rem !important;
  margin-bottom: 8px !important;
}

.max30102-page .measurement-action-container {
  margin-top: 12px !important;
  padding-top: 0 !important;
}

/* Remove any conflicting button styles - use the unified measurement-button class */
/* .max30102-page .measurement-button {
  // All button styles are now handled by the unified measurement-button class
} */

/* Responsive adjustments for larger cards */
@media (max-width: 768px) {
  .max30102-page .measurement-content {
    padding: 15px !important;
    max-width: 100% !important;
  }

  .max30102-page .measurement-card {
    min-height: 240px !important;
    /* Slightly smaller on mobile */
    min-width: 180px !important;
    padding: 20px !important;
    max-width: 200px !important;
  }

  .max30102-page .measurement-value {
    font-size: 3rem !important;
  }

  .max30102-page .measurement-unit {
    font-size: 1.2rem !important;
  }

  .max30102-page .measurement-icon {
    width: 55px !important;
    height: 55px !important;
  }

  .max30102-page .finger-sensor {
    width: 160px !important;
    height: 160px !important;
  }
}

/* Large screen optimization */
@media (min-width: 1200px) {
  .max30102-page .measurement-content {
    max-width: 1000px !important;
  }

  .max30102-page .measurement-card {
    min-height: 300px !important;
    /* Even taller on large screens */
    min-width: 240px !important;
    max-width: 260px !important;
  }

  .max30102-page .measurement-value {
    font-size: 3.8rem !important;
  }
}

/* -------------------------------------------------------------------------- */
/* MAX30102 PULSE OXIMETER DISPLAY - 3D Image with Glow Effects */
/* -------------------------------------------------------------------------- */

/* Oximeter Display Container */
.oximeter-display {
  display: flex;
  justify-content: center;
  align-items: center;
  transition: all 0.5s ease;
  border-radius: 20px;
  padding: 15px;
}

/* Oximeter Image */
.oximeter-image {
  width: 180px;
  height: 180px;
  object-fit: contain;
  transition: all 0.5s ease;
  filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.2));
}

/* Initializing State - Yellow Glow */
.oximeter-display.initializing .oximeter-image {
  filter: drop-shadow(0 0 25px rgba(243, 156, 18, 0.6)) drop-shadow(0 0 50px rgba(243, 156, 18, 0.4));
  animation: oximeterPulse 2s ease-in-out infinite;
}

/* Ready State - Green Glow */
.oximeter-display.ready .oximeter-image {
  filter: drop-shadow(0 0 20px rgba(39, 174, 96, 0.5)) drop-shadow(0 0 40px rgba(39, 174, 96, 0.3));
}

/* Active State - Red Glow (Measuring) */
.oximeter-display.active .oximeter-image {
  filter: drop-shadow(0 0 30px rgba(220, 38, 38, 0.7)) drop-shadow(0 0 60px rgba(220, 38, 38, 0.5));
  animation: oximeterHeartbeat 1.2s ease-in-out infinite;
}

/* Complete State - Green Success Glow */
.oximeter-display.complete .oximeter-image {
  filter: drop-shadow(0 0 25px rgba(40, 167, 69, 0.6)) drop-shadow(0 0 50px rgba(40, 167, 69, 0.4));
  animation: oximeterSuccess 0.6s ease-out;
}

/* Animations */
@keyframes oximeterPulse {

  0%,
  100% {
    transform: scale(1);
    filter: drop-shadow(0 0 25px rgba(243, 156, 18, 0.6)) drop-shadow(0 0 50px rgba(243, 156, 18, 0.4));
  }

  50% {
    transform: scale(1.03);
    filter: drop-shadow(0 0 35px rgba(243, 156, 18, 0.8)) drop-shadow(0 0 70px rgba(243, 156, 18, 0.5));
  }
}

@keyframes oximeterHeartbeat {

  0%,
  100% {
    transform: scale(1);
  }

  25% {
    transform: scale(1.08);
  }

  50% {
    transform: scale(1.04);
  }

  75% {
    transform: scale(1.06);
  }
}

@keyframes oximeterSuccess {
  0% {
    transform: scale(1);
  }

  30% {
    transform: scale(1.1) rotate(2deg);
  }

  60% {
    transform: scale(1.05) rotate(-2deg);
  }

  100% {
    transform: scale(1);
  }
}

/* Keep old styles for backwards compatibility */

.finger-sensor {
  width: 200px;
  height: 200px;
  background: linear-gradient(135deg, #e8f4f8, #d1e8f0);
  border-radius: 30px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: relative;
  border: 4px solid #7f8c8d;
  transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  padding: 25px;
  box-shadow:
    0 10px 30px rgba(0, 0, 0, 0.15),
    inset 0 2px 10px rgba(255, 255, 255, 0.3);
  overflow: visible;
  margin-bottom: 50px;
}

/* Modern Initializing State */
.finger-sensor.initializing {
  border-color: #f39c12;
  background: linear-gradient(135deg, #fff9e6, #fff3cc);
  box-shadow:
    0 10px 30px rgba(243, 156, 18, 0.2),
    inset 0 2px 10px rgba(255, 255, 255, 0.3);
  animation: modernPulse 2s ease-in-out infinite;
}

/* Modern Ready State */
.finger-sensor.ready {
  border-color: #27ae60;
  background: linear-gradient(135deg, #2c3e50, #34495e);
  box-shadow:
    0 10px 30px rgba(39, 174, 96, 0.3),
    inset 0 2px 10px rgba(255, 255, 255, 0.1);
}

/* Modern Active State - Finger Detected - LIGHT THEME */
.finger-sensor.active {
  border-color: #dc2626;
  background: linear-gradient(135deg, #ffe4e4, #ffd6d6);
  box-shadow:
    0 15px 40px rgba(220, 38, 38, 0.2),
    inset 0 2px 15px rgba(255, 255, 255, 0.5);
  animation: activeGlowRed 1.5s ease-in-out infinite;
}

/* Modern Complete State */
.finger-sensor.complete {
  border-color: #28a745;
  background: linear-gradient(135deg, #218838, #28a745);
  box-shadow:
    0 10px 30px rgba(40, 167, 69, 0.4),
    inset 0 2px 10px rgba(255, 255, 255, 0.2);
  animation: completeCelebrateSensor 0.6s ease-out;
}

/* Modern Sensor Light */
.sensor-light {
  width: 60px;
  height: 60px;
  background: linear-gradient(135deg, #95a5a6, #7f8c8d);
  border-radius: 50%;
  margin-bottom: 20px;
  transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  position: relative;
  box-shadow:
    0 4px 15px rgba(0, 0, 0, 0.3),
    inset 0 2px 5px rgba(255, 255, 255, 0.2);
}

/* Initializing Light */
.finger-sensor.initializing .sensor-light {
  background: linear-gradient(135deg, #f39c12, #e67e22);
  animation: modernLightPulse 2s ease-in-out infinite;
  box-shadow:
    0 0 20px rgba(243, 156, 18, 0.6),
    inset 0 2px 5px rgba(255, 255, 255, 0.3);
}

/* Ready Light */
.finger-sensor.ready .sensor-light {
  background: linear-gradient(135deg, #27ae60, #2ecc71);
  box-shadow:
    0 0 20px rgba(39, 174, 96, 0.5),
    inset 0 2px 5px rgba(255, 255, 255, 0.3);
}

/* Active Light - RED THEME */
.finger-sensor.active .sensor-light {
  background: linear-gradient(135deg, #dc2626, #b91c1c);
  animation: heartbeat 1.2s ease-in-out infinite;
  box-shadow:
    0 0 30px rgba(220, 38, 38, 0.8),
    inset 0 2px 5px rgba(255, 255, 255, 0.3);
}

/* Complete Light */
.finger-sensor.complete .sensor-light {
  background: linear-gradient(135deg, #28a745, #218838);
  animation: successPulse 2s ease-in-out infinite;
  box-shadow:
    0 0 25px rgba(40, 167, 69, 0.6),
    inset 0 2px 5px rgba(255, 255, 255, 0.3);
}

/* Modern Finger Placeholder */
.finger-placeholder {
  font-size: 4rem;
  transition: all 0.4s ease;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
  display: flex;
  align-items: center;
  justify-content: center;
}

.finger-sensor.active .finger-placeholder {
  animation: fingerBounce 1.5s ease-in-out infinite;
  filter: drop-shadow(0 6px 12px rgba(220, 38, 38, 0.4));
}

.finger-sensor.complete .finger-placeholder {
  animation: successCelebrate 0.8s ease-out;
}

/* Sensor Status Text */
.sensor-status-text {
  font-size: 1.1rem;
  color: #333;
  font-weight: 700;
  background: rgba(255, 255, 255, 0.95);
  padding: 8px 18px;
  border-radius: 25px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  position: absolute;
  bottom: -45px;
  left: 50%;
  transform: translateX(-50%);
  white-space: nowrap;
  z-index: 10;
}

/* Finger Removed Alert */
.finger-removed-alert {
  position: fixed;
  top: 30px;
  /* Robust Centering to fix "jump" glitch */
  left: 0;
  right: 0;
  margin-left: auto;
  margin-right: auto;
  width: fit-content;

  background: linear-gradient(135deg, #ff6b6b, #ee5a52);
  color: white;
  padding: 18px 25px;
  border-radius: 16px;
  box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4);
  z-index: 1000;
  animation: fingerAlertSlideDown 0.5s ease-out;
  border: 2px solid #ff4757;
  min-width: 350px;
  max-width: 90%;
}

.alert-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 15px;
}

.alert-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.alert-text {
  flex: 1;
  font-weight: 600;
  font-size: 1rem;
  text-align: center;
}

.alert-close {
  background: none;
  border: none;
  color: white;
  font-size: 1.8rem;
  cursor: pointer;
  padding: 0;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.3s ease;
  flex-shrink: 0;
}

.alert-close:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: scale(1.1);
}

/* Animations */
@keyframes modernPulse {

  0%,
  100% {
    box-shadow:
      0 10px 30px rgba(243, 156, 18, 0.3),
      inset 0 2px 10px rgba(255, 255, 255, 0.1);
    transform: scale(1);
  }

  50% {
    box-shadow:
      0 15px 40px rgba(243, 156, 18, 0.5),
      inset 0 2px 15px rgba(255, 255, 255, 0.15);
    transform: scale(1.02);
  }
}

@keyframes modernLightPulse {

  0%,
  100% {
    box-shadow:
      0 0 20px rgba(243, 156, 18, 0.6),
      inset 0 2px 5px rgba(255, 255, 255, 0.3);
    transform: scale(1);
  }

  50% {
    box-shadow:
      0 0 30px rgba(243, 156, 18, 0.8),
      inset 0 2px 8px rgba(255, 255, 255, 0.4);
    transform: scale(1.1);
  }
}

@keyframes activeGlowRed {

  0%,
  100% {
    box-shadow:
      0 15px 40px rgba(220, 38, 38, 0.4),
      inset 0 2px 15px rgba(255, 255, 255, 0.2);
  }

  50% {
    box-shadow:
      0 20px 50px rgba(220, 38, 38, 0.6),
      inset 0 2px 20px rgba(255, 255, 255, 0.3);
  }
}

@keyframes heartbeat {

  0%,
  100% {
    transform: scale(1);
    box-shadow:
      0 0 30px rgba(220, 38, 38, 0.8),
      inset 0 2px 5px rgba(255, 255, 255, 0.3);
  }

  25% {
    transform: scale(1.15);
    box-shadow:
      0 0 40px rgba(220, 38, 38, 1),
      inset 0 2px 8px rgba(255, 255, 255, 0.4);
  }

  50% {
    transform: scale(1.1);
    box-shadow:
      0 0 35px rgba(220, 38, 38, 0.9),
      inset 0 2px 6px rgba(255, 255, 255, 0.35);
  }

  75% {
    transform: scale(1.12);
    box-shadow:
      0 0 38px rgba(220, 38, 38, 0.95),
      inset 0 2px 7px rgba(255, 255, 255, 0.38);
  }
}

@keyframes successPulse {

  0%,
  100% {
    box-shadow:
      0 0 25px rgba(40, 167, 69, 0.6),
      inset 0 2px 5px rgba(255, 255, 255, 0.3);
    transform: scale(1);
  }

  50% {
    box-shadow:
      0 0 35px rgba(40, 167, 69, 0.8),
      inset 0 2px 8px rgba(255, 255, 255, 0.4);
    transform: scale(1.05);
  }
}

@keyframes completeCelebrateSensor {
  0% {
    transform: scale(1);
  }

  25% {
    transform: scale(1.05) rotate(2deg);
  }

  50% {
    transform: scale(1.03) rotate(-1deg);
  }

  75% {
    transform: scale(1.04) rotate(1deg);
  }

  100% {
    transform: scale(1);
  }
}

@keyframes fingerBounce {

  0%,
  100% {
    transform: translateY(0) scale(1);
  }

  25% {
    transform: translateY(-5px) scale(1.05);
  }

  50% {
    transform: translateY(0) scale(1.02);
  }

  75% {
    transform: translateY(-3px) scale(1.03);
  }
}

@keyframes successCelebrate {
  0% {
    transform: scale(1);
  }

  25% {
    transform: scale(1.2) rotate(5deg);
  }

  50% {
    transform: scale(1.1) rotate(-3deg);
  }

  75% {
    transform: scale(1.15) rotate(2deg);
  }

  100% {
    transform: scale(1);
  }
}

@keyframes fingerAlertSlideDown {
  0% {
    transform: translateY(-100%);
    opacity: 0;
  }

  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@media (max-width: 480px) {
  .finger-removed-alert {
    min-width: 280px;
    padding: 12px 16px;
  }

  .alert-text {
    font-size: 0.8rem;
  }

  .alert-icon {
    font-size: 1.1rem;
  }

  .finger-sensor {
    width: 160px;
    height: 160px;
    border-radius: 25px;
  }

  .sensor-light {
    width: 50px;
    height: 50px;
    margin-bottom: 15px;
  }

  .finger-placeholder {
    font-size: 3rem;
    margin-bottom: 12px;
  }

  .sensor-status-text {
    font-size: 0.8rem;
  }
}